{"remainingRequest":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue?vue&type=style&index=0&id=0b596084&scoped=true&lang=css","dependencies":[{"path":"C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue","mtime":1625809709902},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1616796459000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQogIC5oZWFkZXIgew0KICAgIGhlaWdodDogNTBweDsNCiAgICBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2U5ZTllOTsNCiAgICBkaXNwbGF5OiBmbGV4Ow0KICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjsNCiAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgIHBhZGRpbmc6IDAgMjBweDsNCiAgfQ0KICAuZWwtaWNvbi1iYWNrIHsNCiAgICBib3JkZXI6IDFweCBzb2xpZCAjZTllOWU5Ow0KICAgIHBhZGRpbmc6IDRweDsNCiAgICBib3JkZXItcmFkaXVzOiA1MHB4Ow0KICAgIG1hcmdpbi1yaWdodDogMTBweDsNCiAgfQ0KICAucmlnaHQgPiBkaXYgPiAuaWNvbnsNCiAgICBmb250LXNpemU6IDE4cHg7DQogICAgbWFyZ2luLXJpZ2h0OiA2cHg7DQogIH0NCiAgLmF1dGhvciB7DQogICAgbWFyZ2luLWxlZnQ6IDEwcHg7DQogICAgY3Vyc29yOiBwb2ludGVyOw0KICB9DQo="},{"version":3,"sources":["C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue"],"names":[],"mappings":";EAwFE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACb,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IAC9B,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC;EACjB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACnB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACpB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACf,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;EACnB;EACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;IACN,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IACjB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACjB","file":"C:/Users/84407/Desktop/777/777/src/components/Header.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <div class=\"left\">\r\n      <i v-if=\"hasBack\" class=\"el-icon-back\" @click=\"back\"></i>\r\n      <span style=\"font-size: 20px\">{{ name }}</span>\r\n    </div>\r\n    <div class=\"right\">\r\n      <el-popover\r\n        placement=\"bottom\"\r\n        :width=\"320\"\r\n        trigger=\"click\"\r\n        popper-class=\"popper-user-box\"\r\n        @show=\"ff\"\r\n      >\r\n        <template #reference>\r\n          <div class=\"author\">\r\n            <i class=\"icon el-icon-s-custom\" />\r\n            {{ userInfo && userInfo.nickName || '' }}\r\n            <i class=\"el-icon-caret-bottom\" />\r\n          </div>\r\n        </template>\r\n        <div class=\"nickname\">\r\n          <p>登录名：{{ userInfo && userInfo.loginUserName || '' }}</p>\r\n          <p>昵称：{{ userInfo && userInfo.nickName || '' }}</p>\r\n          <el-tag size=\"small\" effect=\"dark\" class=\"logout\" @click=\"logout\">退出</el-tag>\r\n        </div>\r\n      </el-popover>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from '../utils/axios'\r\nimport { localRemove, pathMap } from '../utils/index.js'\r\nexport default {\r\n  name: 'Header',\r\n  setup() {\r\n    const ff = () => {\r\n      getUserInfo()\r\n    }\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      name: '主页',\r\n      userInfo: null,\r\n      hasBack: false\r\n    })\r\n    onMounted(() => {\r\n      const pathname = window.location.hash.split('/')[1] || ''\r\n      //如果当前页面不是登录页面，则拉取用户信息。\r\n      if (!['login'].includes(pathname)) {\r\n        getUserInfo()\r\n      }\r\n    })\r\n    const getUserInfo = async () => {\r\n      const userInfo = await axios.get('/api/userinfo');\r\n      state.userInfo = userInfo\r\n    }\r\n    const logout = () => {\r\n        //此处本应该是axios.delete操作，但我暂时不懂后端该怎么写。。\r\n        localRemove('token')\r\n        window.location.reload()\r\n    }\r\n    const back = () => {\r\n      router.back()\r\n    }\r\n    router.afterEach((to) => {\r\n      console.log('to', to)\r\n    //  const { id } = to.query\r\n      state.name = pathMap[to.name]\r\n    //  if (id && to.name == 'add') {\r\n    //    state.name = '编辑商品'\r\n    //  }\r\n    //下面这条代码是动态添加返回键用的，暂时用不到所以先注释掉\r\n    //state.hasBack = ['level2', 'level3', 'order_detail'].includes(to.name)\r\n    })\r\n    return {\r\n      ...toRefs(state),\r\n      logout,\r\n      back,\r\n      ff\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .header {\r\n    height: 50px;\r\n    border-bottom: 1px solid #e9e9e9;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 20px;\r\n  }\r\n  .el-icon-back {\r\n    border: 1px solid #e9e9e9;\r\n    padding: 4px;\r\n    border-radius: 50px;\r\n    margin-right: 10px;\r\n  }\r\n  .right > div > .icon{\r\n    font-size: 18px;\r\n    margin-right: 6px;\r\n  }\r\n  .author {\r\n    margin-left: 10px;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n<style>\r\n  .popper-user-box {\r\n    background: url('../assets/callingName.jpg') 50% 50% no-repeat!important;\r\n    background-size: cover!important;\r\n    border-radius: 0!important;\r\n  }\r\n  .popper-user-box .nickname {\r\n    position: relative;\r\n    color: #ffffff;\r\n  }\r\n  .popper-user-box .nickname .logout {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    cursor: pointer;\r\n  }\r\n</style>"]}]}
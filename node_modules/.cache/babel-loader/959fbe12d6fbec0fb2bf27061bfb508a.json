{"remainingRequest":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue","mtime":1628700939407},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODQ0MDcvRGVza3RvcC83NzcvNzc3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzg0NDA3L0Rlc2t0b3AvNzc3Lzc3Ny9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IG9uTW91bnRlZCwgcmVhY3RpdmUsIHRvUmVmcyB9IGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHVzZVJvdXRlciB9IGZyb20gJ3Z1ZS1yb3V0ZXInOwppbXBvcnQgYXhpb3MgZnJvbSAnLi4vdXRpbHMvYXhpb3MnOwppbXBvcnQgeyBsb2NhbFJlbW92ZSwgcGF0aE1hcCB9IGZyb20gJy4uL3V0aWxzL2luZGV4LmpzJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdIZWFkZXInLAogIHNldHVwOiBmdW5jdGlvbiBzZXR1cCgpIHsKICAgIHZhciBmZiA9IGZ1bmN0aW9uIGZmKCkgewogICAgICBnZXRVc2VySW5mbygpOwogICAgfTsKCiAgICB2YXIgcm91dGVyID0gdXNlUm91dGVyKCk7CiAgICB2YXIgc3RhdGUgPSByZWFjdGl2ZSh7CiAgICAgIG5hbWU6ICfkuLvpobUnLAogICAgICB1c2VySW5mbzogbnVsbCwKICAgICAgaGFzQmFjazogZmFsc2UKICAgIH0pOwogICAgb25Nb3VudGVkKGZ1bmN0aW9uICgpIHsKICAgICAgZ2V0VXNlckluZm8oKTsKICAgIH0pOwoKICAgIHZhciBnZXRVc2VySW5mbyA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfcmVmID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciB1c2VySW5mbzsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiBheGlvcy5nZXQoJy9hcGkvdXNlcmluZm8nKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgdXNlckluZm8gPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgc3RhdGUudXNlckluZm8gPSB1c2VySW5mbzsKCiAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKTsKCiAgICAgIHJldHVybiBmdW5jdGlvbiBnZXRVc2VySW5mbygpIHsKICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICB9OwogICAgfSgpOwoKICAgIHZhciBsb2dvdXQgPSBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIC8v5q2k5aSE5pys5bqU6K+l5pivYXhpb3MuZGVsZXRl5pON5L2c77yM5L2G5oiR5pqC5pe25LiN5oeC5ZCO56uv6K+l5oCO5LmI5YaZ44CC44CCCiAgICAgIGxvY2FsUmVtb3ZlKCd0b2tlbicpOwogICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7CiAgICB9OwoKICAgIHZhciBiYWNrID0gZnVuY3Rpb24gYmFjaygpIHsKICAgICAgcm91dGVyLmJhY2soKTsKICAgIH07CgogICAgcm91dGVyLmFmdGVyRWFjaChmdW5jdGlvbiAodG8pIHsKICAgICAgY29uc29sZS5sb2coJ3RvJywgdG8pOyAvLyAgY29uc3QgeyBpZCB9ID0gdG8ucXVlcnkKCiAgICAgIHN0YXRlLm5hbWUgPSBwYXRoTWFwW3RvLm5hbWVdOyAvLyAgaWYgKGlkICYmIHRvLm5hbWUgPT0gJ2FkZCcpIHsKICAgICAgLy8gICAgc3RhdGUubmFtZSA9ICfnvJbovpHllYblk4EnCiAgICAgIC8vICB9CiAgICAgIC8v5LiL6Z2i6L+Z5p2h5Luj56CB5piv5Yqo5oCB5re75Yqg6L+U5Zue6ZSu55So55qE77yM5pqC5pe255So5LiN5Yiw5omA5Lul5YWI5rOo6YeK5o6JCiAgICAgIC8vc3RhdGUuaGFzQmFjayA9IFsnbGV2ZWwyJywgJ2xldmVsMycsICdvcmRlcl9kZXRhaWwnXS5pbmNsdWRlcyh0by5uYW1lKQogICAgfSk7CiAgICByZXR1cm4gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0b1JlZnMoc3RhdGUpKSwge30sIHsKICAgICAgbG9nb3V0OiBsb2dvdXQsCiAgICAgIGJhY2s6IGJhY2ssCiAgICAgIGZmOiBmZgogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue"],"names":[],"mappings":";;;;AAgCA,SAAS,SAAT,EAAoB,QAApB,EAA8B,MAA9B,QAA4C,KAA5C;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,OAAO,KAAP,MAAkB,gBAAlB;AACA,SAAS,WAAT,EAAsB,OAAtB,QAAqC,mBAArC;AACA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,KAFa,mBAEL;AACN,QAAM,EAAC,GAAI,SAAL,EAAK,GAAM;AACf,MAAA,WAAW;AACb,KAFA;;AAGA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,IAAI,EAAE,IADe;AAErB,MAAA,QAAQ,EAAE,IAFW;AAGrB,MAAA,OAAO,EAAE;AAHY,KAAD,CAAtB;AAKA,IAAA,SAAS,CAAC,YAAM;AACZ,MAAA,WAAW;AACd,KAFQ,CAAT;;AAGA,QAAM,WAAU;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACK,KAAK,CAAC,GAAN,CAAU,eAAV,CADL;;AAAA;AACZ,gBAAA,QADY;AAElB,gBAAA,KAAK,CAAC,QAAN,GAAiB,QAAjB;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAIA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACjB;AACA,MAAA,WAAW,CAAC,OAAD,CAAX;AACA,MAAA,MAAM,CAAC,QAAP,CAAgB,MAAhB;AACJ,KAJA;;AAKA,QAAM,IAAG,GAAI,SAAP,IAAO,GAAM;AACjB,MAAA,MAAM,CAAC,IAAP;AACF,KAFA;;AAGA,IAAA,MAAM,CAAC,SAAP,CAAiB,UAAC,EAAD,EAAQ;AACvB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EAAkB,EAAlB,EADuB,CAEzB;;AACE,MAAA,KAAK,CAAC,IAAN,GAAa,OAAO,CAAC,EAAE,CAAC,IAAJ,CAApB,CAHuB,CAIzB;AACA;AACA;AACA;AACA;AACC,KATD;AAUA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,MAAM,EAAN,MAFF;AAGE,MAAA,IAAI,EAAJ,IAHF;AAIE,MAAA,EAAC,EAAD;AAJF;AAMF;AA3Ca,CAAf","sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <div class=\"left\">\r\n      <i v-if=\"hasBack\" class=\"el-icon-back\" @click=\"back\"></i>\r\n      <span style=\"font-size: 20px\">{{ name }}</span>\r\n    </div>\r\n    <div class=\"right\">\r\n      <el-popover\r\n        placement=\"bottom\"\r\n        :width=\"320\"\r\n        trigger=\"click\"\r\n        popper-class=\"popper-user-box\"\r\n        @show=\"ff\"\r\n      >\r\n        <template #reference>\r\n          <div class=\"author\">\r\n            <i class=\"icon el-icon-s-custom\" />\r\n            {{ userInfo && userInfo.nickName || '' }}\r\n            <i class=\"el-icon-caret-bottom\" />\r\n          </div>\r\n        </template>\r\n        <div class=\"nickname\">\r\n          <p>登录名：{{ userInfo && userInfo.loginUserName || '' }}</p>\r\n          <p>昵称：{{ userInfo && userInfo.nickName || '' }}</p>\r\n          <el-tag size=\"small\" effect=\"dark\" class=\"logout\" @click=\"logout\">退出</el-tag>\r\n        </div>\r\n      </el-popover>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from '../utils/axios'\r\nimport { localRemove, pathMap } from '../utils/index.js'\r\nexport default {\r\n  name: 'Header',\r\n  setup() {\r\n    const ff = () => {\r\n      getUserInfo()\r\n    }\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      name: '主页',\r\n      userInfo: null,\r\n      hasBack: false\r\n    })\r\n    onMounted(() => {\r\n        getUserInfo()\r\n    })\r\n    const getUserInfo = async () => {\r\n      const userInfo = await axios.get('/api/userinfo');\r\n      state.userInfo = userInfo\r\n    }\r\n    const logout = () => {\r\n        //此处本应该是axios.delete操作，但我暂时不懂后端该怎么写。。\r\n        localRemove('token')\r\n        window.location.reload()\r\n    }\r\n    const back = () => {\r\n      router.back()\r\n    }\r\n    router.afterEach((to) => {\r\n      console.log('to', to)\r\n    //  const { id } = to.query\r\n      state.name = pathMap[to.name]\r\n    //  if (id && to.name == 'add') {\r\n    //    state.name = '编辑商品'\r\n    //  }\r\n    //下面这条代码是动态添加返回键用的，暂时用不到所以先注释掉\r\n    //state.hasBack = ['level2', 'level3', 'order_detail'].includes(to.name)\r\n    })\r\n    return {\r\n      ...toRefs(state),\r\n      logout,\r\n      back,\r\n      ff\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .header {\r\n    height: 50px;\r\n    border-bottom: 1px solid #e9e9e9;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 20px;\r\n  }\r\n  .el-icon-back {\r\n    border: 1px solid #e9e9e9;\r\n    padding: 4px;\r\n    border-radius: 50px;\r\n    margin-right: 10px;\r\n  }\r\n  .right > div > .icon{\r\n    font-size: 18px;\r\n    margin-right: 6px;\r\n  }\r\n  .author {\r\n    margin-left: 10px;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n<style>\r\n  .popper-user-box {\r\n    background: url('../assets/callingName.jpg') 50% 50% no-repeat!important;\r\n    background-size: cover!important;\r\n    border-radius: 0!important;\r\n  }\r\n  .popper-user-box .nickname {\r\n    position: relative;\r\n    color: #ffffff;\r\n  }\r\n  .popper-user-box .nickname .logout {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    cursor: pointer;\r\n  }\r\n</style>"],"sourceRoot":""}]}
{"remainingRequest":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue?vue&type=script&lang=js","dependencies":[{"path":"C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue","mtime":1625809709902},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84407\\Desktop\\777\\777\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1616796459000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiQzovVXNlcnMvODQ0MDcvRGVza3RvcC83NzcvNzc3L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9vYmplY3RTcHJlYWQyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzg0NDA3L0Rlc2t0b3AvNzc3Lzc3Ny9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBvbk1vdW50ZWQsIHJlYWN0aXZlLCB0b1JlZnMgfSBmcm9tICd2dWUnOwppbXBvcnQgeyB1c2VSb3V0ZXIgfSBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IGF4aW9zIGZyb20gJy4uL3V0aWxzL2F4aW9zJzsKaW1wb3J0IHsgbG9jYWxSZW1vdmUsIHBhdGhNYXAgfSBmcm9tICcuLi91dGlscy9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSGVhZGVyJywKICBzZXR1cDogZnVuY3Rpb24gc2V0dXAoKSB7CiAgICB2YXIgZmYgPSBmdW5jdGlvbiBmZigpIHsKICAgICAgZ2V0VXNlckluZm8oKTsKICAgIH07CgogICAgdmFyIHJvdXRlciA9IHVzZVJvdXRlcigpOwogICAgdmFyIHN0YXRlID0gcmVhY3RpdmUoewogICAgICBuYW1lOiAn5Li76aG1JywKICAgICAgdXNlckluZm86IG51bGwsCiAgICAgIGhhc0JhY2s6IGZhbHNlCiAgICB9KTsKICAgIG9uTW91bnRlZChmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBwYXRobmFtZSA9IHdpbmRvdy5sb2NhdGlvbi5oYXNoLnNwbGl0KCcvJylbMV0gfHwgJyc7IC8v5aaC5p6c5b2T5YmN6aG16Z2i5LiN5piv55m75b2V6aG16Z2i77yM5YiZ5ouJ5Y+W55So5oi35L+h5oGv44CCCgogICAgICBpZiAoIVsnbG9naW4nXS5pbmNsdWRlcyhwYXRobmFtZSkpIHsKICAgICAgICBnZXRVc2VySW5mbygpOwogICAgICB9CiAgICB9KTsKCiAgICB2YXIgZ2V0VXNlckluZm8gPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgdXNlckluZm87CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICByZXR1cm4gYXhpb3MuZ2V0KCcvYXBpL3VzZXJpbmZvJyk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIHVzZXJJbmZvID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgIHN0YXRlLnVzZXJJbmZvID0gdXNlckluZm87CgogICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSk7CgogICAgICByZXR1cm4gZnVuY3Rpb24gZ2V0VXNlckluZm8oKSB7CiAgICAgICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfTsKICAgIH0oKTsKCiAgICB2YXIgbG9nb3V0ID0gZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICAvL+atpOWkhOacrOW6lOivpeaYr2F4aW9zLmRlbGV0ZeaTjeS9nO+8jOS9huaIkeaaguaXtuS4jeaHguWQjuerr+ivpeaAjuS5iOWGmeOAguOAggogICAgICBsb2NhbFJlbW92ZSgndG9rZW4nKTsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfTsKCiAgICB2YXIgYmFjayA9IGZ1bmN0aW9uIGJhY2soKSB7CiAgICAgIHJvdXRlci5iYWNrKCk7CiAgICB9OwoKICAgIHJvdXRlci5hZnRlckVhY2goZnVuY3Rpb24gKHRvKSB7CiAgICAgIGNvbnNvbGUubG9nKCd0bycsIHRvKTsgLy8gIGNvbnN0IHsgaWQgfSA9IHRvLnF1ZXJ5CgogICAgICBzdGF0ZS5uYW1lID0gcGF0aE1hcFt0by5uYW1lXTsgLy8gIGlmIChpZCAmJiB0by5uYW1lID09ICdhZGQnKSB7CiAgICAgIC8vICAgIHN0YXRlLm5hbWUgPSAn57yW6L6R5ZWG5ZOBJwogICAgICAvLyAgfQogICAgICAvL+S4i+mdoui/meadoeS7o+eggeaYr+WKqOaAgea3u+WKoOi/lOWbnumUrueUqOeahO+8jOaaguaXtueUqOS4jeWIsOaJgOS7peWFiOazqOmHiuaOiQogICAgICAvL3N0YXRlLmhhc0JhY2sgPSBbJ2xldmVsMicsICdsZXZlbDMnLCAnb3JkZXJfZGV0YWlsJ10uaW5jbHVkZXModG8ubmFtZSkKICAgIH0pOwogICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdG9SZWZzKHN0YXRlKSksIHt9LCB7CiAgICAgIGxvZ291dDogbG9nb3V0LAogICAgICBiYWNrOiBiYWNrLAogICAgICBmZjogZmYKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:\\Users\\84407\\Desktop\\777\\777\\src\\components\\Header.vue"],"names":[],"mappings":";;;;;;;AAgCA,SAAS,SAAT,EAAoB,QAApB,EAA8B,MAA9B,QAA4C,KAA5C;AACA,SAAS,SAAT,QAA0B,YAA1B;AACA,OAAO,KAAP,MAAkB,gBAAlB;AACA,SAAS,WAAT,EAAsB,OAAtB,QAAqC,mBAArC;AACA,eAAe;AACb,EAAA,IAAI,EAAE,QADO;AAEb,EAAA,KAFa,mBAEL;AACN,QAAM,EAAC,GAAI,SAAL,EAAK,GAAM;AACf,MAAA,WAAW;AACb,KAFA;;AAGA,QAAM,MAAK,GAAI,SAAS,EAAxB;AACA,QAAM,KAAI,GAAI,QAAQ,CAAC;AACrB,MAAA,IAAI,EAAE,IADe;AAErB,MAAA,QAAQ,EAAE,IAFW;AAGrB,MAAA,OAAO,EAAE;AAHY,KAAD,CAAtB;AAKA,IAAA,SAAS,CAAC,YAAM;AACd,UAAM,QAAO,GAAI,MAAM,CAAC,QAAP,CAAgB,IAAhB,CAAqB,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,KAAsC,EAAvD,CADc,CAEd;;AACA,UAAI,CAAC,CAAC,OAAD,EAAU,QAAV,CAAmB,QAAnB,CAAL,EAAmC;AACjC,QAAA,WAAW;AACb;AACD,KANQ,CAAT;;AAOA,QAAM,WAAU;AAAA,yEAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBACK,KAAK,CAAC,GAAN,CAAU,eAAV,CADL;;AAAA;AACZ,gBAAA,QADY;AAElB,gBAAA,KAAK,CAAC,QAAN,GAAiB,QAAjB;;AAFkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAJ;;AAAA,sBAAV,WAAU;AAAA;AAAA;AAAA,OAAhB;;AAIA,QAAM,MAAK,GAAI,SAAT,MAAS,GAAM;AACjB;AACA,MAAA,WAAW,CAAC,OAAD,CAAX;AACA,MAAA,MAAM,CAAC,QAAP,CAAgB,MAAhB;AACJ,KAJA;;AAKA,QAAM,IAAG,GAAI,SAAP,IAAO,GAAM;AACjB,MAAA,MAAM,CAAC,IAAP;AACF,KAFA;;AAGA,IAAA,MAAM,CAAC,SAAP,CAAiB,UAAC,EAAD,EAAQ;AACvB,MAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EAAkB,EAAlB,EADuB,CAEzB;;AACE,MAAA,KAAK,CAAC,IAAN,GAAa,OAAO,CAAC,EAAE,CAAC,IAAJ,CAApB,CAHuB,CAIzB;AACA;AACA;AACA;AACA;AACC,KATD;AAUA,2CACK,MAAM,CAAC,KAAD,CADX;AAEE,MAAA,MAAM,EAAN,MAFF;AAGE,MAAA,IAAI,EAAJ,IAHF;AAIE,MAAA,EAAC,EAAD;AAJF;AAMF;AA/Ca,CAAf","sourcesContent":["<template>\r\n  <div class=\"header\">\r\n    <div class=\"left\">\r\n      <i v-if=\"hasBack\" class=\"el-icon-back\" @click=\"back\"></i>\r\n      <span style=\"font-size: 20px\">{{ name }}</span>\r\n    </div>\r\n    <div class=\"right\">\r\n      <el-popover\r\n        placement=\"bottom\"\r\n        :width=\"320\"\r\n        trigger=\"click\"\r\n        popper-class=\"popper-user-box\"\r\n        @show=\"ff\"\r\n      >\r\n        <template #reference>\r\n          <div class=\"author\">\r\n            <i class=\"icon el-icon-s-custom\" />\r\n            {{ userInfo && userInfo.nickName || '' }}\r\n            <i class=\"el-icon-caret-bottom\" />\r\n          </div>\r\n        </template>\r\n        <div class=\"nickname\">\r\n          <p>登录名：{{ userInfo && userInfo.loginUserName || '' }}</p>\r\n          <p>昵称：{{ userInfo && userInfo.nickName || '' }}</p>\r\n          <el-tag size=\"small\" effect=\"dark\" class=\"logout\" @click=\"logout\">退出</el-tag>\r\n        </div>\r\n      </el-popover>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { onMounted, reactive, toRefs } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport axios from '../utils/axios'\r\nimport { localRemove, pathMap } from '../utils/index.js'\r\nexport default {\r\n  name: 'Header',\r\n  setup() {\r\n    const ff = () => {\r\n      getUserInfo()\r\n    }\r\n    const router = useRouter()\r\n    const state = reactive({\r\n      name: '主页',\r\n      userInfo: null,\r\n      hasBack: false\r\n    })\r\n    onMounted(() => {\r\n      const pathname = window.location.hash.split('/')[1] || ''\r\n      //如果当前页面不是登录页面，则拉取用户信息。\r\n      if (!['login'].includes(pathname)) {\r\n        getUserInfo()\r\n      }\r\n    })\r\n    const getUserInfo = async () => {\r\n      const userInfo = await axios.get('/api/userinfo');\r\n      state.userInfo = userInfo\r\n    }\r\n    const logout = () => {\r\n        //此处本应该是axios.delete操作，但我暂时不懂后端该怎么写。。\r\n        localRemove('token')\r\n        window.location.reload()\r\n    }\r\n    const back = () => {\r\n      router.back()\r\n    }\r\n    router.afterEach((to) => {\r\n      console.log('to', to)\r\n    //  const { id } = to.query\r\n      state.name = pathMap[to.name]\r\n    //  if (id && to.name == 'add') {\r\n    //    state.name = '编辑商品'\r\n    //  }\r\n    //下面这条代码是动态添加返回键用的，暂时用不到所以先注释掉\r\n    //state.hasBack = ['level2', 'level3', 'order_detail'].includes(to.name)\r\n    })\r\n    return {\r\n      ...toRefs(state),\r\n      logout,\r\n      back,\r\n      ff\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n  .header {\r\n    height: 50px;\r\n    border-bottom: 1px solid #e9e9e9;\r\n    display: flex;\r\n    justify-content: space-between;\r\n    align-items: center;\r\n    padding: 0 20px;\r\n  }\r\n  .el-icon-back {\r\n    border: 1px solid #e9e9e9;\r\n    padding: 4px;\r\n    border-radius: 50px;\r\n    margin-right: 10px;\r\n  }\r\n  .right > div > .icon{\r\n    font-size: 18px;\r\n    margin-right: 6px;\r\n  }\r\n  .author {\r\n    margin-left: 10px;\r\n    cursor: pointer;\r\n  }\r\n</style>\r\n<style>\r\n  .popper-user-box {\r\n    background: url('../assets/callingName.jpg') 50% 50% no-repeat!important;\r\n    background-size: cover!important;\r\n    border-radius: 0!important;\r\n  }\r\n  .popper-user-box .nickname {\r\n    position: relative;\r\n    color: #ffffff;\r\n  }\r\n  .popper-user-box .nickname .logout {\r\n    position: absolute;\r\n    right: 0;\r\n    top: 0;\r\n    cursor: pointer;\r\n  }\r\n</style>"],"sourceRoot":""}]}